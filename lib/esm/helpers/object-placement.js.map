{"version":3,"sources":["../../../src/helpers/object-placement.ts"],"names":["getGlobalRotation","objectPlacement","console","log","RelativePlacement","getGlobalPosition","globalPlacement","relativeCoordinates","Location","Coordinates","relativePlacement","undefined","length","x","round","value","y","z","getAbsolutePlacement","PlacementRelTo","num","Math"],"mappings":";;;;;;;;AAEO,SAASA,iBAAT,CAA2BC,eAA3B,EAA8D;AAEjE;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYF,eAAe,CAACG,iBAA5B,EAJiE,CAKjE;AACA;AACH;AAED;AACA;AACA;AACA;AACA;AACA;;;AACO,SAASC,iBAAT,CAA2BJ,eAA3B,EAAiDK,eAAyB,GAAG,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CAA7E,EAA+F;AAElG;AACA,QAAMC,mBAAmB,GAAGN,eAAe,EAAEG,iBAAjB,EAAoCI,QAApC,EAA8CC,WAA1E;AACA,MAAIC,iBAA2B,GAAG,EAAlC;;AACA,MAAGH,mBAAmB,IAAII,SAAvB,IAAoCJ,mBAAmB,CAACK,MAApB,IAA8B,CAArE,EAAuE;AACnE,UAAMC,CAAC,GAAGC,KAAK,CAACP,mBAAmB,CAAC,CAAD,CAAnB,CAAuBQ,KAAxB,CAAf;AACA,UAAMC,CAAC,GAAGF,KAAK,CAACP,mBAAmB,CAAC,CAAD,CAAnB,CAAuBQ,KAAxB,CAAf;AACA,UAAME,CAAC,GAAGH,KAAK,CAACP,mBAAmB,CAAC,CAAD,CAAnB,CAAuBQ,KAAxB,CAAf;AACAL,IAAAA,iBAAiB,GAAG,CAACG,CAAD,EAAGG,CAAH,EAAKC,CAAL,CAApB;AACH,GAViG,CAYlG;;;AACAX,EAAAA,eAAe,GAAGY,oBAAoB,CAACR,iBAAD,EAAoBJ,eAApB,CAAtC,CAbkG,CAelG;;AACA,MAAGL,eAAe,CAACkB,cAAnB,EAAkC;AAC9B,WAAOd,iBAAiB,CAACJ,eAAe,CAACkB,cAAjB,EAAiCb,eAAjC,CAAxB;AACH;;AAED,SAAOA,eAAP;AACH;;AAED,SAASY,oBAAT,CAA8BR,iBAA9B,EAA2DJ,eAA3D,EAAqF;AACjF,QAAMO,CAAC,GAAGH,iBAAiB,CAAC,CAAD,CAAjB,GAAqBJ,eAAe,CAAC,CAAD,CAA9C;AACA,QAAMU,CAAC,GAAGN,iBAAiB,CAAC,CAAD,CAAjB,GAAqBJ,eAAe,CAAC,CAAD,CAA9C;AACA,QAAMW,CAAC,GAAGP,iBAAiB,CAAC,CAAD,CAAjB,GAAqBJ,eAAe,CAAC,CAAD,CAA9C;AACA,SAAO,CAACO,CAAD,EAAGG,CAAH,EAAKC,CAAL,CAAP;AACH;;AAED,SAASH,KAAT,CAAeM,GAAf,EAA2B;AACvB,SAAOC,IAAI,CAACP,KAAL,CAAWM,GAAG,GAAG,MAAjB,IAA2B,MAAlC;AACH","sourcesContent":["import { IfcAxis2Placement3D, IfcLocalPlacement } from \"web-ifc\";\n\nexport function getGlobalRotation(objectPlacement: IfcLocalPlacement){\n\n    // Get relative placement\n    console.log(\"Relative placement\");\n    console.log(objectPlacement.RelativePlacement);\n    // console.log(Object.keys(objectPlacement));\n    // console.log(objectPlacement);\n}\n\n/**\n * Return the global position (coordinate) from the local one\n * @param objectPlacement is the object placement in the local coordinate system\n * @param globalPlacement is the global placement (being calculated as the tree is traversed)\n * @returns global coordinate\n */\nexport function getGlobalPosition(objectPlacement: any, globalPlacement: number[] = [0,0,0]): number[]{\n    \n    // Get relative placement\n    const relativeCoordinates = objectPlacement?.RelativePlacement?.Location?.Coordinates;\n    let relativePlacement: number[] = [];\n    if(relativeCoordinates != undefined && relativeCoordinates.length == 3){\n        const x = round(relativeCoordinates[0].value);\n        const y = round(relativeCoordinates[1].value);\n        const z = round(relativeCoordinates[2].value);\n        relativePlacement = [x,y,z];\n    }\n\n    // Update global placement\n    globalPlacement = getAbsolutePlacement(relativePlacement, globalPlacement);\n\n    // If related to something else, continue the journey\n    if(objectPlacement.PlacementRelTo){\n        return getGlobalPosition(objectPlacement.PlacementRelTo, globalPlacement);\n    }\n\n    return globalPlacement;\n}\n\nfunction getAbsolutePlacement(relativePlacement: number[], globalPlacement: number[]){\n    const x = relativePlacement[0]+globalPlacement[0];\n    const y = relativePlacement[1]+globalPlacement[1];\n    const z = relativePlacement[2]+globalPlacement[2];\n    return [x,y,z];\n}\n\nfunction round(num: number){\n    return Math.round(num * 100000) / 100000;\n}"],"file":"object-placement.js"}